<!--
  فایل: bookstore_index.html
  توضیحات: یک سایت تک‌صفحه‌ای کتاب‌فروشی با HTML + Tailwind + JS (سبد خرید، جستجو، فیلتر دسته، پنجره جزئیات)
  نحوه استفاده: این فایل را با نام index.html ذخیره کنید و مستقیم در Netlify / GitHub Pages یا فقط باز کردن در مرورگر اجرا کنید.
--><!doctype html>

<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>کتاب‌فروشی شایانیو — Bookstore</title>
  <meta name="description" content="کتاب‌فروشی آنلاین با طراحی زیبا، جستجو، فیلتر و سبد خرید محلی. مناسب برای نمایش و فروش کتاب‌ها.">
  <meta name="keywords" content="کتاب، فروشگاه کتاب، رمان، کودک، علمی">
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* سبک‌های اضافه */
    .line-clamp-2 { display: -webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: 2; overflow: hidden; }
    /* راست‌چین بهتر برای فونت‌های فارسی محلی */
    body { font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", "Helvetica Neue", Arial, "Noto Sans", "Noto Nastaliq Urdu", "Vazirmatn", sans-serif; }
  </style>
</head>
<body class="bg-gray-50 text-gray-800">
  <!-- NAV -->
  <header class="bg-white shadow sticky top-0 z-30">
    <div class="container mx-auto px-4 py-4 flex items-center justify-between">
      <a href="#home" class="flex items-center gap-3">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6v6l4 2" />
        </svg>
        <div>
          <h1 class="text-lg font-bold">شایانیو بوک‌شاپ</h1>
          <p class="text-xs text-gray-500">کتاب‌های برتر، ارسال سریع</p>
        </div>
      </a><div class="flex-1 mx-6">
    <div class="relative">
      <input id="searchInput" type="text" placeholder="جستجوی کتاب، نویسنده یا ISBN..." class="w-full rounded-md border-gray-200 shadow-sm pr-12 pl-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-300" />
      <button id="clearSearch" class="absolute left-2 top-1/2 -translate-y-1/2 text-sm text-gray-500 hidden">پاک</button>
      <button id="searchBtn" class="absolute left-2 top-1/2 -translate-y-1/2 text-gray-500">🔍</button>
    </div>
  </div>

  <div class="flex items-center gap-4">
    <nav class="hidden md:flex gap-3">
      <a href="#shop" class="text-sm text-gray-600 hover:text-indigo-600">فروشگاه</a>
      <a href="#categories" class="text-sm text-gray-600 hover:text-indigo-600">دسته‌ها</a>
      <a href="#about" class="text-sm text-gray-600 hover:text-indigo-600">درباره ما</a>
    </nav>
    <button id="cartBtn" class="relative bg-indigo-600 text-white px-3 py-2 rounded-md shadow hover:bg-indigo-700">سبد خرید <span id="cartCount" class="bg-white text-indigo-600 rounded-full px-2 py-0.5 text-xs mr-2">0</span></button>
  </div>
</div>

  </header>  <!-- HERO -->  <section id="home" class="container mx-auto px-4 py-12">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
      <div>
        <h2 class="text-3xl md:text-4xl font-extrabold">دنیایی از کتاب‌ها در یک‌جا 📚</h2>
        <p class="mt-4 text-gray-600">رمان‌های محبوب، کتاب‌های علمی، کودک و نوجوان و منابع آموزشی. با جستجو و فیلتر سریع، کتاب دلخواهت رو پیدا کن.</p><div class="mt-6 flex gap-3">
      <a href="#shop" class="bg-indigo-600 text-white px-5 py-3 rounded-md shadow hover:bg-indigo-700">مشاهده کتاب‌ها</a>
      <a href="#about" class="border border-indigo-600 text-indigo-600 px-5 py-3 rounded-md hover:bg-indigo-50">درباره ما</a>
    </div>
  </div>
  <div>
    <img src="https://picsum.photos/seed/books1/800/600" alt="books" class="rounded-lg shadow-lg w-full object-cover" />
  </div>
</div>

  </section>  <!-- CATEGORIES -->  <section id="categories" class="container mx-auto px-4 py-6">
    <h3 class="text-xl font-bold mb-4">دسته‌ها</h3>
    <div class="flex gap-3 overflow-auto py-2">
      <button class="category-btn px-4 py-2 rounded-md bg-white shadow text-sm" data-cat="all">همه</button>
      <button class="category-btn px-4 py-2 rounded-md bg-white shadow text-sm" data-cat="novel">رمان</button>
      <button class="category-btn px-4 py-2 rounded-md bg-white shadow text-sm" data-cat="science">علمی</button>
      <button class="category-btn px-4 py-2 rounded-md bg-white shadow text-sm" data-cat="kids">کودک و نوجوان</button>
      <button class="category-btn px-4 py-2 rounded-md bg-white shadow text-sm" data-cat="edu">آموزشی</button>
      <button class="category-btn px-4 py-2 rounded-md bg-white shadow text-sm" data-cat="history">تاریخ</button>
    </div>
  </section>  <!-- SHOP / PRODUCTS -->  <section id="shop" class="container mx-auto px-4 py-6">
    <div class="flex items-center justify-between">
      <h3 class="text-xl font-bold">فروشگاه</h3>
      <div class="text-sm text-gray-500">نمایش <span id="visibleCount">0</span> از <span id="totalCount">0</span> کتاب</div>
    </div><div id="productsGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-6">
  <!-- کارت‌های کتاب توسط JS ساخته می‌شوند -->
</div>

  </section>  <!-- PRODUCT MODAL -->  <div id="productModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-40">
    <div class="bg-white rounded-lg w-11/12 md:w-3/4 lg:w-1/2 p-6 shadow-lg relative">
      <button id="closeModal" class="absolute left-4 top-4 text-gray-500">✖</button>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <img id="modalImg" src="" alt="" class="rounded-lg w-full object-cover" />
        <div class="md:col-span-2">
          <h4 id="modalTitle" class="text-2xl font-bold"></h4>
          <p id="modalAuthor" class="text-gray-600 mt-1"></p>
          <div class="mt-3 text-lg font-semibold" id="modalPrice"></div>
          <p class="mt-4 text-gray-700" id="modalDesc"></p><div class="mt-6 flex gap-3">
        <button id="addModalCart" class="bg-indigo-600 text-white px-4 py-2 rounded-md">افزودن به سبد</button>
        <button id="buyNow" class="border border-indigo-600 text-indigo-600 px-4 py-2 rounded-md">خرید سریع</button>
      </div>
    </div>
  </div>
</div>

  </div>  <!-- CART DRAWER -->  <aside id="cartDrawer" class="fixed top-0 right-0 h-full w-full md:w-96 transform translate-x-full transition-transform z-50 bg-white shadow-lg">
    <div class="p-4 border-b flex items-center justify-between">
      <h4 class="text-lg font-bold">سبد خرید</h4>
      <button id="closeCart" class="text-gray-500">✖</button>
    </div>
    <div id="cartItems" class="p-4 space-y-4 overflow-auto h-[60vh]"></div>
    <div class="p-4 border-t">
      <div class="flex items-center justify-between mb-3">
        <div class="text-sm text-gray-600">جمع</div>
        <div id="cartTotal" class="text-lg font-bold">0 تومان</div>
      </div>
      <div class="flex gap-3">
        <button id="checkout" class="flex-1 bg-indigo-600 text-white px-4 py-2 rounded-md">پرداخت</button>
        <button id="clearCart" class="flex-1 border border-gray-300 rounded-md">پاک کردن</button>
      </div>
    </div>
  </aside>  <!-- ABOUT / CONTACT -->  <section id="about" class="container mx-auto px-4 py-12">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
      <div>
        <h3 class="text-2xl font-bold">درباره شایانیو بوک‌شاپ</h3>
        <p class="mt-4 text-gray-600">شایانیو بوک‌شاپ یک فروشگاه اینترنتی نمونه برای نمایش کاتالوگ کتاب‌ها است. این نسخه نمونه است و برای اتصال به درگاه پرداخت و مدیریت محصولات می‌توان آن را به نسخه پایتون/بک‌اند متصل کرد.</p><h4 class="mt-6 font-semibold">آدرس</h4>
    <p class="text-gray-600">تهران، ایران</p>

    <h4 class="mt-6 font-semibold">ساعات کاری</h4>
    <p class="text-gray-600">شنبه تا چهارشنبه: ۹ صبح تا ۶ عصر</p>
  </div>

  <form id="contactForm" class="bg-white p-6 rounded-lg shadow">
    <h4 class="font-semibold mb-3">تماس با ما</h4>
    <input type="text" id="cname" placeholder="نام" class="w-full border border-gray-200 rounded-md p-2 mb-3" required />
    <input type="email" id="cemail" placeholder="ایمیل" class="w-full border border-gray-200 rounded-md p-2 mb-3" required />
    <textarea id="cmessage" placeholder="پیام شما" class="w-full border border-gray-200 rounded-md p-2 mb-3" rows="4"></textarea>
    <button type="submit" class="bg-indigo-600 text-white px-4 py-2 rounded-md">ارسال</button>
  </form>
</div>

  </section>  <!-- FOOTER -->  <footer class="bg-gray-800 text-white py-8 mt-8">
    <div class="container mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-6">
      <div>
        <h5 class="font-bold">شایانیو</h5>
        <p class="text-sm text-gray-300 mt-2">فروشگاه کتاب با طراحی مدرن. حقوق همه مطالب محفوظ است.</p>
      </div>
      <div>
        <h5 class="font-bold">دسترسی سریع</h5>
        <ul class="mt-2 text-sm text-gray-300 space-y-1">
          <li><a href="#shop">فروشگاه</a></li>
          <li><a href="#categories">دسته‌ها</a></li>
          <li><a href="#about">تماس با ما</a></li>
        </ul>
      </div>
      <div>
        <h5 class="font-bold">عضویت در خبرنامه</h5>
        <p class="text-sm text-gray-300 mt-2">ایمیل خود را وارد کنید تا از تخفیف‌ها باخبر شوید.</p>
        <div class="mt-3 flex gap-2">
          <input type="email" id="newsletter" placeholder="ایمیل شما" class="p-2 rounded-md w-full text-gray-800" />
          <button id="subNewsletter" class="bg-indigo-600 px-3 rounded-md">عضو شو</button>
        </div>
      </div>
    </div>
  </footer>  <!-- SCRIPTS: ساختار محصولات، رندر، سبد خرید، جستجو، فیلتر -->  <script>
    // نمونه داده محصولات (قابل افزایش) - قیمت به تومان
    const products = [
      {id:1, title:'راز موفقیت', author:'جان دو', category:'science', price:120000, img:'https://picsum.photos/seed/book1/400/600', desc:'کتاب مفیدی دربارهٔ توسعه فردی و رازهای موفقیت.'},
      {id:2, title:'شب‌های تهران', author:'م. الف', category:'novel', price:85000, img:'https://picsum.photos/seed/book2/400/600', desc:'رمان مدرن دربارهٔ زندگی شهری و عشق.'},
      {id:3, title:'فیزیک برای همه', author:'دکتر س', category:'edu', price:150000, img:'https://picsum.photos/seed/book3/400/600', desc:'کتابی آموزشی برای پایه‌های علوم فیزیکی.'},
      {id:4, title:'ماجراهای کودکانه', author:'نویسنده کودک', category:'kids', price:65000, img:'https://picsum.photos/seed/book4/400/600', desc:'داستان‌های کوتاه و جذاب برای کودکان.'},
      {id:5, title:'تاریخ ایران', author:'پژوهشگر', category:'history', price:200000, img:'https://picsum.photos/seed/book5/400/600', desc:'مروری بر رویدادهای مهم تاریخی ایران.'},
      {id:6, title:'داستان‌های کوتاه', author:'نویسنده مشهور', category:'novel', price:78000, img:'https://picsum.photos/seed/book6/400/600', desc:'مجموعه‌ای از داستان‌های کوتاه تأمل‌برانگیز.'},
      // می‌توانید محصول جدید اضافه کنید
    ];

    // وضعیت سبد خرید ذخیره در localStorage
    let cart = JSON.parse(localStorage.getItem('cart_v1')) || [];

    // المنت‌ها
    const productsGrid = document.getElementById('productsGrid');
    const totalCountEl = document.getElementById('totalCount');
    const visibleCountEl = document.getElementById('visibleCount');
    const cartCount = document.getElementById('cartCount');
    const cartBtn = document.getElementById('cartBtn');
    const cartDrawer = document.getElementById('cartDrawer');
    const cartItemsEl = document.getElementById('cartItems');
    const cartTotalEl = document.getElementById('cartTotal');
    const closeCart = document.getElementById('closeCart');
    const clearCartBtn = document.getElementById('clearCart');
    const checkoutBtn = document.getElementById('checkout');

    const productModal = document.getElementById('productModal');
    const closeModal = document.getElementById('closeModal');
    const modalImg = document.getElementById('modalImg');
    const modalTitle = document.getElementById('modalTitle');
    const modalAuthor = document.getElementById('modalAuthor');
    const modalPrice = document.getElementById('modalPrice');
    const modalDesc = document.getElementById('modalDesc');
    const addModalCart = document.getElementById('addModalCart');

    const searchInput = document.getElementById('searchInput');
    const searchBtn = document.getElementById('searchBtn');
    const clearSearch = document.getElementById('clearSearch');

    // مقداردهی اولیه
    totalCountEl.textContent = products.length;

    function formatPrice(n){
      return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + ' تومان';
    }

    // رندر محصولات
    function renderProducts(list){
      productsGrid.innerHTML = '';
      list.forEach(p => {
        const card = document.createElement('article');
        card.className = 'bg-white rounded-lg shadow overflow-hidden';
        card.innerHTML = `
          <img src="${p.img}" alt="${p.title}" class="w-full h-56 object-cover cursor-pointer" data-id="${p.id}" />
          <div class="p-4">
            <h4 class="font-semibold text-lg line-clamp-2">${p.title}</h4>
            <p class="text-sm text-gray-500">${p.author}</p>
            <div class="mt-3 flex items-center justify-between">
              <div class="font-bold">${formatPrice(p.price)}</div>
              <div class="flex gap-2">
                <button class="add-cart text-sm px-3 py-1 rounded-md bg-indigo-600 text-white" data-id="${p.id}">اضافه</button>
                <button class="view-btn text-sm px-3 py-1 rounded-md border" data-id="${p.id}">جزئیات</button>
              </div>
            </div>
          </div>
        `;
        productsGrid.appendChild(card);
      });
      visibleCountEl.textContent = list.length;

      // الصاق رویدادها
      document.querySelectorAll('.add-cart').forEach(b => b.addEventListener('click', e => addToCart(parseInt(e.target.dataset.id))));
      document.querySelectorAll('.view-btn').forEach(b => b.addEventListener('click', e => openModal(parseInt(e.target.dataset.id))));
      document.querySelectorAll('img[data-id]').forEach(img => img.addEventListener('click', e => openModal(parseInt(e.target.dataset.id))));
    }

    // فیلتر بر اساس دسته
    document.querySelectorAll('.category-btn').forEach(btn => btn.addEventListener('click', e => {
      const cat = e.target.dataset.cat;
      document.querySelectorAll('.category-btn').forEach(x => x.classList.remove('bg-indigo-100'));
      e.target.classList.add('bg-indigo-100');
      if(cat === 'all') renderProducts(products);
      else renderProducts(products.filter(p => p.category === cat));
    }));

    // جستجو
    searchBtn.addEventListener('click', ()=> applySearch());
    searchInput.addEventListener('keypress', e => { if(e.key === 'Enter') applySearch(); });
    clearSearch.addEventListener('click', ()=> { searchInput.value=''; clearSearch.classList.add('hidden'); renderProducts(products); });
    searchInput.addEventListener('input', ()=> { clearSearch.classList.toggle('hidden', searchInput.value.trim()===''); });

    function applySearch(){
      const q = searchInput.value.trim().toLowerCase();
      if(!q) { renderProducts(products); return; }
      const res = products.filter(p => (p.title + ' ' + p.author).toLowerCase().includes(q));
      renderProducts(res);
    }

    // مودال
    let currentModalId = null;
    function openModal(id){
      const p = products.find(x=>x.id===id);
      if(!p) return;
      currentModalId = id;
      modalImg.src = p.img;
      modalTitle.textContent = p.title;
      modalAuthor.textContent = p.author;
      modalPrice.textContent = formatPrice(p.price);
      modalDesc.textContent = p.desc;
      productModal.classList.remove('hidden');
      productModal.classList.add('flex');
    }
    closeModal.addEventListener('click', ()=> { productModal.classList.add('hidden'); productModal.classList.remove('flex'); });
    addModalCart.addEventListener('click', ()=>{ if(currentModalId) addToCart(currentModalId); });

    // سبد خرید
    function saveCart(){ localStorage.setItem('cart_v1', JSON.stringify(cart)); updateCartUI(); }
    function addToCart(id){
      const p = products.find(x=>x.id===id);
      if(!p) return;
      const found = cart.find(c=>c.id===id);
      if(found) found.qty++;
      else cart.push({id:p.id, title:p.title, price:p.price, img:p.img, qty:1});
      saveCart();
      // باز کردن در صورت اضافه شدن
      openCart();
    }

    function updateCartUI(){
      cartCount.textContent = cart.reduce((s,i)=>s+i.qty,0);
      cartItemsEl.innerHTML = '';
      if(cart.length===0) cartItemsEl.innerHTML = '<p class="text-gray-500">هیچ کتابی در سبد نیست.</p>';
      cart.forEach(item => {
        const div = document.createElement('div');
        div.className = 'flex items-center gap-3';
        div.innerHTML = `
          <img src="${item.img}" alt="" class="w-16 h-20 object-cover rounded">
          <div class="flex-1">
            <div class="font-semibold">${item.title}</div>
            <div class="text-sm text-gray-500">${formatPrice(item.price)}</div>
            <div class="text-sm text-gray-500">تعداد: <button data-id="${item.id}" class="dec text-xs px-2">-</button> <span class="mx-1">${item.qty}</span> <button data-id="${item.id}" class="inc text-xs px-2">+</button></div>
          </div>
          <div class="font-semibold">${formatPrice(item.price * item.qty)}</div>
        `;
        cartItemsEl.appendChild(div);
      });
      cartItemsEl.querySelectorAll('.inc').forEach(b => b.addEventListener('click', e=>{ changeQty(parseInt(e.target.dataset.id),1); }));
      cartItemsEl.querySelectorAll('.dec').forEach(b => b.addEventListener('click', e=>{ changeQty(parseInt(e.target.dataset.id),-1); }));

      const total = cart.reduce((s,i)=>s + i.price * i.qty, 0);
      cartTotalEl.textContent = formatPrice(total);
    }

    function changeQty(id, delta){
      const it = cart.find(c=>c.id===id);
      if(!it) return;
      it.qty += delta;
      if(it.qty <= 0) cart = cart.filter(c=>c.id!==id);
      saveCart();
    }

    function openCart(){ cartDrawer.style.transform = 'translateX(0)'; updateCartUI(); }
    function closeCartFn(){ cartDrawer.style.transform = 'translateX(100%)'; }
    cartBtn.addEventListener('click', openCart);
    closeCart.addEventListener('click', closeCartFn);
    clearCartBtn.addEventListener('click', ()=>{ if(confirm('پاک کردن سبد؟')){ cart = []; saveCart(); } });

    checkoutBtn.addEventListener('click', ()=>{
      if(cart.length===0){ alert('سبد خرید خالی است.'); return; }
      // در نسخه ساده، فقط نمایش پیغام
      alert('به درگاه پرداخت منتقل می‌شوید (این نسخه نمونه است). مجموع: ' + cartTotalEl.textContent);
      // برای نسخه واقعی باید به بک‌اند و درگاه متصل شود.
    });

    // ذخیره اولیه و رندر
    renderProducts(products);
    updateCartUI();

    // فرم تماس
    document.getElementById('contactForm').addEventListener('submit', e=>{
      e.preventDefault();
      alert('پیام شما ثبت شد. ممنون!');
      e.target.reset();
    });

    // خبرنامه کوچک
    document.getElementById('subNewsletter').addEventListener('click', ()=>{
      const email = document.getElementById('newsletter').value.trim();
      if(!email) return alert('لطفاً ایمیل را وارد کنید.');
      alert('ممنون! ایمیل شما ثبت شد.');
      document.getElementById('newsletter').value='';
    });

    // بهبود UX: بستن مودال با ESC و کلیک روی پشت‌زمینه
    window.addEventListener('keydown', e=>{ if(e.key==='Escape'){ productModal.classList.add('hidden'); productModal.classList.remove('flex'); closeCartFn(); } });
    productModal.addEventListener('click', e=>{ if(e.target === productModal){ productModal.classList.add('hidden'); productModal.classList.remove('flex'); } });

  </script></body>
                                        </html>
